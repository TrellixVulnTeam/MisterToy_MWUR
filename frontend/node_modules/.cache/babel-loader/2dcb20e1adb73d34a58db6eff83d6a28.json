{"remainingRequest":"C:\\Users\\dekel\\Desktop\\Coding Acadeny\\MyProjects\\Day47-CLI-FrameworkAdvanced\\mistertoy\\Frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\dekel\\Desktop\\Coding Acadeny\\MyProjects\\Day47-CLI-FrameworkAdvanced\\mistertoy\\Frontend\\src\\services\\http.service.js","dependencies":[{"path":"C:\\Users\\dekel\\Desktop\\Coding Acadeny\\MyProjects\\Day47-CLI-FrameworkAdvanced\\mistertoy\\Frontend\\src\\services\\http.service.js","mtime":1625837443123},{"path":"C:\\Users\\dekel\\Desktop\\Coding Acadeny\\MyProjects\\Day47-CLI-FrameworkAdvanced\\mistertoy\\Frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\dekel\\Desktop\\Coding Acadeny\\MyProjects\\Day47-CLI-FrameworkAdvanced\\mistertoy\\Frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzL2Rla2VsL0Rlc2t0b3AvQ29kaW5nIEFjYWRlbnkvTXlQcm9qZWN0cy9EYXk0Ny1DTEktRnJhbWV3b3JrQWR2YW5jZWQvbWlzdGVydG95L0Zyb250ZW5kL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgQXhpb3MgZnJvbSAnYXhpb3MnOwppbXBvcnQgeyByb3V0ZXIgfSBmcm9tICdAL3JvdXRlcic7CnZhciBCQVNFX1VSTCA9IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicgPyAnL2FwaS8nIDogJy8vbG9jYWxob3N0OjMwMzAvYXBpLyc7CnZhciBheGlvcyA9IEF4aW9zLmNyZWF0ZSh7CiAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCn0pOwpleHBvcnQgdmFyIGh0dHBTZXJ2aWNlID0gewogIGdldDogZnVuY3Rpb24gZ2V0KGVuZHBvaW50LCBkYXRhKSB7CiAgICByZXR1cm4gYWpheChlbmRwb2ludCwgJ0dFVCcsIGRhdGEpOwogIH0sCiAgcG9zdDogZnVuY3Rpb24gcG9zdChlbmRwb2ludCwgZGF0YSkgewogICAgcmV0dXJuIGFqYXgoZW5kcG9pbnQsICdQT1NUJywgZGF0YSk7CiAgfSwKICBwdXQ6IGZ1bmN0aW9uIHB1dChlbmRwb2ludCwgZGF0YSkgewogICAgcmV0dXJuIGFqYXgoZW5kcG9pbnQsICdQVVQnLCBkYXRhKTsKICB9LAogIGRlbGV0ZTogZnVuY3Rpb24gX2RlbGV0ZShlbmRwb2ludCwgZGF0YSkgewogICAgcmV0dXJuIGFqYXgoZW5kcG9pbnQsICdERUxFVEUnLCBkYXRhKTsKICB9Cn07CgpmdW5jdGlvbiBhamF4KF94KSB7CiAgcmV0dXJuIF9hamF4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0KCmZ1bmN0aW9uIF9hamF4KCkgewogIF9hamF4ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKGVuZHBvaW50KSB7CiAgICB2YXIgbWV0aG9kLAogICAgICAgIGRhdGEsCiAgICAgICAgcmVzLAogICAgICAgIF9hcmdzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBtZXRob2QgPSBfYXJncy5sZW5ndGggPiAxICYmIF9hcmdzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJnc1sxXSA6ICdHRVQnOwogICAgICAgICAgICBkYXRhID0gX2FyZ3MubGVuZ3RoID4gMiAmJiBfYXJnc1syXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3NbMl0gOiBudWxsOwogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMjsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgIHJldHVybiBheGlvcyh7CiAgICAgICAgICAgICAgdXJsOiAiIi5jb25jYXQoQkFTRV9VUkwpLmNvbmNhdChlbmRwb2ludCksCiAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsCiAgICAgICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgICAgICBwYXJhbXM6IG1ldGhvZCA9PT0gJ0dFVCcgPyBkYXRhIDogbnVsbAogICAgICAgICAgICB9KTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDIpOwogICAgICAgICAgICBjb25zb2xlLmxvZygiSGFkIElzc3VlcyAiLmNvbmNhdChtZXRob2QsICJpbmcgdG8gdGhlIGJhY2tlbmQsIGVuZHBvaW50OiAiKS5jb25jYXQoZW5kcG9pbnQsICIsIHdpdGggZGF0YTogIikuY29uY2F0KGRhdGEpKTsKICAgICAgICAgICAgY29uc29sZS5kaXIoX2NvbnRleHQudDApOwoKICAgICAgICAgICAgaWYgKF9jb250ZXh0LnQwLnJlc3BvbnNlICYmIF9jb250ZXh0LnQwLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgLy8gRGVwZW5kcyBvbiByb3V0aW5nIHN0YXJ0ZWd5IC0gaGFzaCBvciBoaXN0b3J5CiAgICAgICAgICAgICAgLy8gd2luZG93LmxvY2F0aW9uLmFzc2lnbignLyMvbG9naW4nKQogICAgICAgICAgICAgIC8vIHdpbmRvdy5sb2NhdGlvbi5hc3NpZ24oJy9sb2dpbicpCiAgICAgICAgICAgICAgcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aHJvdyBfY29udGV4dC50MDsKCiAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMiwgOV1dKTsKICB9KSk7CiAgcmV0dXJuIF9hamF4LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7Cn0="},{"version":3,"sources":["C:/Users/dekel/Desktop/Coding Acadeny/MyProjects/Day47-CLI-FrameworkAdvanced/mistertoy/Frontend/src/services/http.service.js"],"names":["Axios","router","BASE_URL","process","env","NODE_ENV","axios","create","withCredentials","httpService","get","endpoint","data","ajax","post","put","delete","method","url","params","res","console","log","dir","response","status","push"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,MAAR,QAAqB,UAArB;AAEA,IAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACX,OADW,GAEX,uBAFN;AAKA,IAAIC,KAAK,GAAGN,KAAK,CAACO,MAAN,CAAa;AACrBC,EAAAA,eAAe,EAAE;AADI,CAAb,CAAZ;AAIA,OAAO,IAAMC,WAAW,GAAG;AACvBC,EAAAA,GADuB,eACnBC,QADmB,EACTC,IADS,EACH;AAChB,WAAOC,IAAI,CAACF,QAAD,EAAW,KAAX,EAAkBC,IAAlB,CAAX;AACH,GAHsB;AAIvBE,EAAAA,IAJuB,gBAIlBH,QAJkB,EAIRC,IAJQ,EAIF;AACjB,WAAOC,IAAI,CAACF,QAAD,EAAW,MAAX,EAAmBC,IAAnB,CAAX;AACH,GANsB;AAOvBG,EAAAA,GAPuB,eAOnBJ,QAPmB,EAOTC,IAPS,EAOH;AAChB,WAAOC,IAAI,CAACF,QAAD,EAAW,KAAX,EAAkBC,IAAlB,CAAX;AACH,GATsB;AAUvBI,EAAAA,MAVuB,mBAUhBL,QAVgB,EAUNC,IAVM,EAUA;AACnB,WAAOC,IAAI,CAACF,QAAD,EAAW,QAAX,EAAqBC,IAArB,CAAX;AACH;AAZsB,CAApB;;SAeQC,I;;;;;kEAAf,iBAAoBF,QAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8BM,YAAAA,MAA9B,2DAAuC,KAAvC;AAA8CL,YAAAA,IAA9C,2DAAqD,IAArD;AAAA;AAAA;AAAA,mBAEwBN,KAAK,CAAC;AACrBY,cAAAA,GAAG,YAAKhB,QAAL,SAAgBS,QAAhB,CADkB;AAErBM,cAAAA,MAAM,EAANA,MAFqB;AAGrBL,cAAAA,IAAI,EAAJA,IAHqB;AAIrBO,cAAAA,MAAM,EAAGF,MAAM,KAAK,KAAZ,GAAqBL,IAArB,GAA4B;AAJf,aAAD,CAF7B;;AAAA;AAEYQ,YAAAA,GAFZ;AAAA,6CAQeA,GAAG,CAACR,IARnB;;AAAA;AAAA;AAAA;AAUQS,YAAAA,OAAO,CAACC,GAAR,sBAA0BL,MAA1B,2CAAiEN,QAAjE,0BAAyFC,IAAzF;AACAS,YAAAA,OAAO,CAACE,GAAR;;AACA,gBAAI,YAAIC,QAAJ,IAAgB,YAAIA,QAAJ,CAAaC,MAAb,KAAwB,GAA5C,EAAiD;AAC7C;AACA;AACA;AACAxB,cAAAA,MAAM,CAACyB,IAAP,CAAY,QAAZ;AACH;;AAjBT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import Axios from 'axios'\r\nimport {router} from '@/router'\r\n\r\nconst BASE_URL = process.env.NODE_ENV === 'production'\r\n    ? '/api/'\r\n    : '//localhost:3030/api/'\r\n\r\n\r\nvar axios = Axios.create({\r\n    withCredentials: true\r\n})\r\n\r\nexport const httpService = {\r\n    get(endpoint, data) {\r\n        return ajax(endpoint, 'GET', data)\r\n    },\r\n    post(endpoint, data) {\r\n        return ajax(endpoint, 'POST', data)\r\n    },\r\n    put(endpoint, data) {\r\n        return ajax(endpoint, 'PUT', data)\r\n    },\r\n    delete(endpoint, data) {\r\n        return ajax(endpoint, 'DELETE', data)\r\n    }\r\n}\r\n\r\nasync function ajax(endpoint, method = 'GET', data = null) {\r\n   try {\r\n      const res = await axios({\r\n         url: `${BASE_URL}${endpoint}`,\r\n         method,\r\n         data,\r\n         params: (method === 'GET') ? data : null\r\n      })\r\n        return res.data\r\n    } catch (err) {\r\n        console.log(`Had Issues ${method}ing to the backend, endpoint: ${endpoint}, with data: ${data}`)\r\n        console.dir(err)\r\n        if (err.response && err.response.status === 401) {\r\n            // Depends on routing startegy - hash or history\r\n            // window.location.assign('/#/login')\r\n            // window.location.assign('/login')\r\n            router.push('/login')\r\n        }\r\n        throw err\r\n    }\r\n}"]}]}