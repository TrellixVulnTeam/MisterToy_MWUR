{"remainingRequest":"C:\\Users\\dekel\\Desktop\\Coding Acadeny\\MyProjects\\Day47-CLI-FrameworkAdvanced\\mistertoy\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\dekel\\Desktop\\Coding Acadeny\\MyProjects\\Day47-CLI-FrameworkAdvanced\\mistertoy\\frontend\\src\\services\\async-storage.service.js","dependencies":[{"path":"C:\\Users\\dekel\\Desktop\\Coding Acadeny\\MyProjects\\Day47-CLI-FrameworkAdvanced\\mistertoy\\frontend\\src\\services\\async-storage.service.js","mtime":1625481407591},{"path":"C:\\Users\\dekel\\Desktop\\Coding Acadeny\\MyProjects\\Day47-CLI-FrameworkAdvanced\\mistertoy\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\dekel\\Desktop\\Coding Acadeny\\MyProjects\\Day47-CLI-FrameworkAdvanced\\mistertoy\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKZXhwb3J0IHZhciBzdG9yYWdlU2VydmljZSA9IHsKICBxdWVyeTogcXVlcnksCiAgZ2V0OiBnZXQsCiAgcG9zdDogcG9zdCwKICBwdXQ6IHB1dCwKICByZW1vdmU6IHJlbW92ZQp9OwoKZnVuY3Rpb24gcXVlcnkoZW50aXR5VHlwZSkgewogIHZhciBkZWxheSA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogNTAwOwogIHZhciBlbnRpdGllcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oZW50aXR5VHlwZSkpIHx8IFtdOwogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgIHJlc29sdmUoZW50aXRpZXMpOwogICAgfSwgZGVsYXkpOwogIH0pOwp9CgpmdW5jdGlvbiBnZXQoZW50aXR5VHlwZSwgZW50aXR5SWQpIHsKICByZXR1cm4gcXVlcnkoZW50aXR5VHlwZSkudGhlbihmdW5jdGlvbiAoZW50aXRpZXMpIHsKICAgIHJldHVybiBlbnRpdGllcy5maW5kKGZ1bmN0aW9uIChlbnRpdHkpIHsKICAgICAgcmV0dXJuIGVudGl0eS5faWQgPT09IGVudGl0eUlkOwogICAgfSk7CiAgfSk7Cn0KCmZ1bmN0aW9uIHBvc3QoZW50aXR5VHlwZSwgbmV3RW50aXR5KSB7CiAgbmV3RW50aXR5Ll9pZCA9IF9tYWtlSWQoKTsKICByZXR1cm4gcXVlcnkoZW50aXR5VHlwZSkudGhlbihmdW5jdGlvbiAoZW50aXRpZXMpIHsKICAgIGVudGl0aWVzLnB1c2gobmV3RW50aXR5KTsKCiAgICBfc2F2ZShlbnRpdHlUeXBlLCBlbnRpdGllcyk7CgogICAgcmV0dXJuIG5ld0VudGl0eTsKICB9KTsKfQoKZnVuY3Rpb24gcHV0KGVudGl0eVR5cGUsIHVwZGF0ZWRFbnRpdHkpIHsKICByZXR1cm4gcXVlcnkoZW50aXR5VHlwZSkudGhlbihmdW5jdGlvbiAoZW50aXRpZXMpIHsKICAgIHZhciBpZHggPSBlbnRpdGllcy5maW5kSW5kZXgoZnVuY3Rpb24gKGVudGl0eSkgewogICAgICByZXR1cm4gZW50aXR5Ll9pZCA9PT0gdXBkYXRlZEVudGl0eS5faWQ7CiAgICB9KTsKICAgIGVudGl0aWVzLnNwbGljZShpZHgsIDEsIHVwZGF0ZWRFbnRpdHkpOwoKICAgIF9zYXZlKGVudGl0eVR5cGUsIGVudGl0aWVzKTsKCiAgICByZXR1cm4gdXBkYXRlZEVudGl0eTsKICB9KTsKfQoKZnVuY3Rpb24gcmVtb3ZlKGVudGl0eVR5cGUsIGVudGl0eUlkKSB7CiAgcmV0dXJuIHF1ZXJ5KGVudGl0eVR5cGUpLnRoZW4oZnVuY3Rpb24gKGVudGl0aWVzKSB7CiAgICB2YXIgaWR4ID0gZW50aXRpZXMuZmluZEluZGV4KGZ1bmN0aW9uIChlbnRpdHkpIHsKICAgICAgcmV0dXJuIGVudGl0eS5faWQgPT09IGVudGl0eUlkOwogICAgfSk7CiAgICBpZiAoaWR4IDwgMCkgdGhyb3cgbmV3IEVycm9yKCJVbmtub3duIEVudGl0eSAiLmNvbmNhdChlbnRpdHlJZCkpOwogICAgZW50aXRpZXMuc3BsaWNlKGlkeCwgMSk7CgogICAgX3NhdmUoZW50aXR5VHlwZSwgZW50aXRpZXMpOwogIH0pOwp9CgpmdW5jdGlvbiBfc2F2ZShlbnRpdHlUeXBlLCBlbnRpdGllcykgewogIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGVudGl0eVR5cGUsIEpTT04uc3RyaW5naWZ5KGVudGl0aWVzKSk7Cn0KCmZ1bmN0aW9uIF9tYWtlSWQoKSB7CiAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogNTsKICB2YXIgdGV4dCA9ICcnOwogIHZhciBwb3NzaWJsZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSc7CgogIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHsKICAgIHRleHQgKz0gcG9zc2libGUuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHBvc3NpYmxlLmxlbmd0aCkpOwogIH0KCiAgcmV0dXJuIHRleHQ7Cn0="},{"version":3,"sources":["C:/Users/dekel/Desktop/Coding Acadeny/MyProjects/Day47-CLI-FrameworkAdvanced/mistertoy/frontend/src/services/async-storage.service.js"],"names":["storageService","query","get","post","put","remove","entityType","delay","entities","JSON","parse","localStorage","getItem","Promise","resolve","setTimeout","entityId","then","find","entity","_id","newEntity","_makeId","push","_save","updatedEntity","idx","findIndex","splice","Error","setItem","stringify","length","text","possible","i","charAt","Math","floor","random"],"mappings":"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","sourcesContent":["export const storageService = {\r\n    query,\r\n    get,\r\n    post,\r\n    put,\r\n    remove,\r\n}\r\n\r\nfunction query(entityType, delay = 500) {\r\n    var entities = JSON.parse(localStorage.getItem(entityType)) || []\r\n    return new Promise((resolve) => {\r\n        setTimeout(() => {\r\n            resolve(entities)\r\n        }, delay)\r\n    })\r\n}\r\n\r\nfunction get(entityType, entityId) {\r\n    return query(entityType)\r\n        .then(entities => entities.find(entity => entity._id === entityId))\r\n}\r\n\r\nfunction post(entityType, newEntity) {\r\n    newEntity._id = _makeId()\r\n    return query(entityType)\r\n        .then(entities => {\r\n            entities.push(newEntity)\r\n            _save(entityType, entities)\r\n            return newEntity\r\n        })\r\n}\r\n\r\nfunction put(entityType, updatedEntity) {\r\n    return query(entityType)\r\n        .then(entities => {\r\n            const idx = entities.findIndex(entity => entity._id === updatedEntity._id)\r\n            entities.splice(idx, 1, updatedEntity)\r\n            _save(entityType, entities)\r\n            return updatedEntity\r\n        })\r\n}\r\n\r\nfunction remove(entityType, entityId) {\r\n    return query(entityType)\r\n        .then(entities => {\r\n            const idx = entities.findIndex(entity => entity._id === entityId)\r\n            if (idx < 0) throw new Error(`Unknown Entity ${entityId}`)\r\n            entities.splice(idx, 1)\r\n            _save(entityType, entities)\r\n        })\r\n}\r\n\r\n\r\nfunction _save(entityType, entities) {\r\n    localStorage.setItem(entityType, JSON.stringify(entities))\r\n}\r\n\r\nfunction _makeId(length = 5) {\r\n    var text = ''\r\n    var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\r\n    for (var i = 0; i < length; i++) {\r\n        text += possible.charAt(Math.floor(Math.random() * possible.length))\r\n    }\r\n    return text\r\n}"]}]}